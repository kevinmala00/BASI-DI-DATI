SET NOCOUNT ON
SET DATEFORMAT dmy

USE master
go

IF EXISTS (SELECT name FROM master.dbo.sysdatabases WHERE name = 'DB_2019_06_11')  
	DROP DATABASE [DB_2019_06_11]
GO

CREATE database [DB_2019_06_11]
GO
USE [DB_2019_06_11]
GO

/*
Creo gli script delle tabelle
*/

CREATE TABLE PORTO(
CODP [nvarchar] (50) NOT NULL PRIMARY KEY,
CITTA [nvarchar] (50) NOT NULL)
GO

CREATE TABLE TRAGHETTO(
CODT [nvarchar] (50) NOT NULL PRIMARY KEY,
TIPO [nvarchar] (50) NOT NULL,
CAPIENZA [int] NOT NULL
)

CREATE TABLE TRAVERSATA(
CODT [nvarchar] (50) NOT NULL,
PORTOPARTENZA [nvarchar] (50) NOT NULL,
PORTOARRIVO [nvarchar] (50) NOT NULL,
DATAORAPARTENZA [datetime] NOT NULL,
DATAORAARRIVO [datetime] NOT NULL,
BANCHINAPARTENZA [nvarchar] (50) NOT NULL,
PRIMARY KEY(CODT, DATAORAPARTENZA),
FOREIGN KEY(PORTOPARTENZA) REFERENCES PORTO,
FOREIGN KEY(PORTOARRIVO) REFERENCES PORTO,
FOREIGN KEY(CODT) REFERENCES TRAGHETTO,
)
GO

CREATE TABLE BIGLIETTO(
CODB [int] IDENTITY PRIMARY KEY,
NOME [nvarchar] (50) NOT NULL,
COGNOME [nvarchar] (50) NOT NULL,
CODT [nvarchar] (50) NOT NULL,
DATAORAPARTENZA [datetime] NOT NULL,
FOREIGN KEY(CODT, DATAORAPARTENZA) REFERENCES TRAVERSATA)
GO

INSERT INTO PORTO VALUES('CIV','Civitavecchia')
INSERT INTO PORTO VALUES('LIV','Livorno')
INSERT INTO PORTO VALUES('PAL','Palermo')
INSERT INTO PORTO VALUES('CAG','Cagliari')
INSERT INTO PORTO VALUES('OLB','Olbia')
INSERT INTO PORTO VALUES('TRA','Trapani')

INSERT INTO TRAGHETTO VALUES('ZA0101','traghetto RX20',400)
INSERT INTO TRAGHETTO VALUES('ZA0102','aliscafo',30)
INSERT INTO TRAGHETTO VALUES('ZA0122','nave veloce',80)

INSERT INTO TRAGHETTO VALUES('ZA0151','traghetto RX151',400)
INSERT INTO TRAGHETTO VALUES('ZA0152','traghetto RX152',120)
INSERT INTO TRAGHETTO VALUES('ZA0153','traghetto RX153',180)


INSERT INTO TRAVERSATA VALUES('ZA0101','CIV','TRA','21:00:00 30-07-2019','06:00:00 31-07-2019','2')
INSERT INTO TRAVERSATA VALUES('ZA0101','CIV','TRA','21:00:00 31-07-2019','06:00:00 01-08-2019','2')
INSERT INTO TRAVERSATA VALUES('ZA0101','TRA','CIV','08:00:00 31-07-2019','20:00:00 31-07-2019','3')
INSERT INTO TRAVERSATA VALUES('ZA0101','TRA','CIV','08:00:00 01-08-2019','20:00:00 01-08-2019','3')
INSERT INTO TRAVERSATA VALUES('ZA0101','CIV','TRA','08:00:00 02-08-2019','20:00:00 02-08-2019','3')

INSERT INTO TRAVERSATA VALUES('ZA0102','LIV','OLB','22:00:00 30-07-2019','06:00:00 31-07-2019','2')
INSERT INTO TRAVERSATA VALUES('ZA0102','LIV','OLB','22:00:00 31-07-2019','06:00:00 01-08-2019','2')
INSERT INTO TRAVERSATA VALUES('ZA0102','OLB','LIV','08:00:00 31-07-2019','19:30:00 31-07-2019','3')
INSERT INTO TRAVERSATA VALUES('ZA0102','OLB','LIV','08:00:00 01-08-2019','19:30:00 01-08-2019','3')
INSERT INTO TRAVERSATA VALUES('ZA0102','LIV','OLB','08:00:00 02-08-2019','19:30:00 02-08-2019','3')

INSERT INTO TRAVERSATA VALUES('ZA0122','OLB','LIV','10:00:00 01-08-2019','19:30:00 01-08-2019','4')
INSERT INTO TRAVERSATA VALUES('ZA0122','LIV','OLB','10:00:00 02-08-2019','19:30:00 02-08-2019','4')
INSERT INTO TRAVERSATA VALUES('ZA0122','OLB','LIV','10:00:00 03-08-2019','19:30:00 03-08-2019','4')
INSERT INTO TRAVERSATA VALUES('ZA0122','LIV','OLB','10:00:00 04-08-2019','19:30:00 04-08-2019','4')

INSERT INTO TRAVERSATA VALUES('ZA0152','CAG','LIV','10:00:00 01-08-2019','19:30:00 01-08-2019','4')
INSERT INTO TRAVERSATA VALUES('ZA0152','LIV','CAG','10:00:00 02-08-2019','19:30:00 02-08-2019','4')
INSERT INTO TRAVERSATA VALUES('ZA0152','CAG','LIV','10:00:00 03-08-2019','19:30:00 03-08-2019','4')
INSERT INTO TRAVERSATA VALUES('ZA0152','LIV','CAG','10:00:00 04-08-2019','19:30:00 04-08-2019','4')

INSERT INTO TRAVERSATA VALUES('ZA0151','CIV','OLB','21:00:00 30-07-2019','06:00:00 31-07-2019','2')
INSERT INTO TRAVERSATA VALUES('ZA0151','OLB','CIV','21:00:00 31-07-2019','06:00:00 01-08-2019','2')
INSERT INTO TRAVERSATA VALUES('ZA0151','OLB','CIV','08:00:00 01-08-2019','20:00:00 01-08-2019','3')
INSERT INTO TRAVERSATA VALUES('ZA0151','CIV','OLB','08:00:00 02-08-2019','20:00:00 02-08-2019','3')


INSERT INTO BIGLIETTO VALUES('MARIO','ROSSI','ZA0101','21:00:00 30-07-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','ROSSETTI','ZA0101','21:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','ROTEGLIA','ZA0101','08:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','REDITTI','ZA0101','08:00:00 01-08-2019')

INSERT INTO BIGLIETTO VALUES('MARIO','RECALATI','ZA0122','10:00:00 04-08-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','RIGHETTI','ZA0101','08:00:00 02-08-2019')

INSERT INTO BIGLIETTO VALUES('MARIO','RASTELLI','ZA0102','22:00:00 30-07-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','ROSI','ZA0102','22:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','RASTESSI','ZA0102','08:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','RITORTO','ZA0102','08:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','ROSSITTI','ZA0102','08:00:00 02-08-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','ROSSI','ZA0102','08:00:00 01-08-2019')

INSERT INTO BIGLIETTO VALUES('MARIO','ROMERRI','ZA0122','10:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','REDICCHIO','ZA0122','10:00:00 02-08-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','ROSTRI','ZA0122','10:00:00 03-08-2019')
INSERT INTO BIGLIETTO VALUES('MARIO','ROSSI','ZA0122','10:00:00 03-08-2019')



INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BIANCHI','ZA0101','21:00:00 30-07-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BATECCHI','ZA0101','21:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BISSETTI','ZA0101','08:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BIALETTI','ZA0101','08:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BOCCANNI','ZA0122','10:00:00 04-08-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BRETTI','ZA0101','08:00:00 02-08-2019')

INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BRICHINI','ZA0102','22:00:00 30-07-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BORELLINI','ZA0102','22:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BERNARDI','ZA0102','08:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BACHELLI','ZA0102','08:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BORGHI','ZA0102','08:00:00 02-08-2019')

INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BITASSI','ZA0122','10:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BICONCHI','ZA0122','10:00:00 02-08-2019')
INSERT INTO BIGLIETTO VALUES('GIUSEPPE','BICOCCHI','ZA0122','10:00:00 03-08-2019')

INSERT INTO BIGLIETTO VALUES('LEANDRO','CARETTI','ZA0101','21:00:00 30-07-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','GIUSTI','ZA0101','21:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','ZINGARETTI','ZA0101','08:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','BOSCHI','ZA0101','08:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','COSCHEI','ZA0122','10:00:00 04-08-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','CEROTTI','ZA0101','08:00:00 02-08-2019')

INSERT INTO BIGLIETTO VALUES('LEANDRO','LUSCHI','ZA0102','22:00:00 30-07-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','DONDI','ZA0102','22:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','DORATI','ZA0102','08:00:00 31-07-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','CALENDRI','ZA0102','08:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','VOTERRI','ZA0102','08:00:00 02-08-2019')

INSERT INTO BIGLIETTO VALUES('LEANDRO','MEZZOGIORNO','ZA0122','10:00:00 01-08-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','ARLETTI','ZA0122','10:00:00 02-08-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','BIGI','ZA0122','10:00:00 03-08-2019')
INSERT INTO BIGLIETTO VALUES('LEANDRO','MEZZOGIORNO','ZA0122','10:00:00 04-08-2019')



