SET NOCOUNT ON
SET DATEFORMAT dmy

USE master
GO
/*Creazione DB 
*/
IF EXISTS (SELECT name FROM master.dbo.sysdatabases WHERE name = 'DB12042018')  
	DROP DATABASE [DB12042018]
GO

CREATE database [DB12042018]
GO
USE [DB12042018]
GO

/*Creo gli script delle tabelle
*/

CREATE TABLE FORNITORE (
CODF CHAR(10) NOT NULL PRIMARY KEY, 
NOMEFORNITORE VARCHAR(45) NOT NULL,
CITTA VARCHAR(2) NOT NULL)
GO

CREATE TABLE PRODOTTO (
CODP CHAR(10) NOT NULL PRIMARY KEY,
DESCRIZIONE VARCHAR(45) DEFAULT NULL,
PREZZO  MONEY DEFAULT NULL)
GO

CREATE TABLE FORNISCE (
ANNO INT NOT NULL,
CODP CHAR(10) NOT NULL FOREIGN KEY REFERENCES PRODOTTO,
CODF CHAR(10) NOT NULL FOREIGN KEY REFERENCES FORNITORE,
QTY INT NOT NULL,
PRIMARY KEY(ANNO,CODP,CODF))
GO
CREATE TABLE CITTA (
SIGLA VARCHAR(2) NOT NULL PRIMARY KEY,
NOME VARCHAR(50) )
GO
/*
Inserisco dei dati nelle tabelle
*/
INSERT INTO FORNITORE VALUES('01','PIPPO GHIZATI','MO')
INSERT INTO FORNITORE VALUES('02','ROBERTO TEGGI','BO')
INSERT INTO FORNITORE VALUES('03','ENRICO CHINEO','MI')
INSERT INTO FORNITORE VALUES('04','FRANCESCO TERRACINI','RO')
INSERT INTO FORNITORE VALUES('05','GIUSEPPE ROSSI','TR')
INSERT INTO FORNITORE VALUES('06','ROBERTO BUONI','BO')
INSERT INTO FORNITORE VALUES('07','ALESSANDRO SERRA','MO')
INSERT INTO FORNITORE VALUES('08','FRANCO NERI','CS')
GO

INSERT INTO PRODOTTO VALUES('001','ACQUA','25')
INSERT INTO PRODOTTO VALUES('002','FANTA','30')
INSERT INTO PRODOTTO VALUES('003','BIRRA','30')
INSERT INTO PRODOTTO VALUES('004','PASTA','10')
GO


INSERT INTO FORNISCE VALUES(2016,'001','02',19)
INSERT INTO FORNISCE VALUES(2016,'001','03',11)
INSERT INTO FORNISCE VALUES(2016,'001','04',8)
INSERT INTO FORNISCE VALUES(2017,'001','05',7)
INSERT INTO FORNISCE VALUES(2016,'002','04',5)
INSERT INTO FORNISCE VALUES(2017,'002','01',3)
INSERT INTO FORNISCE VALUES(2017,'002','03',1)
INSERT INTO FORNISCE VALUES(2016,'002','02',12)
INSERT INTO FORNISCE VALUES(2017,'002','07',10)
INSERT INTO FORNISCE VALUES(2017,'003','01',15)
INSERT INTO FORNISCE VALUES(2016,'004','01',9)
INSERT INTO FORNISCE VALUES(2016,'001','05',14)
INSERT INTO FORNISCE VALUES(2016,'001','08',7)
INSERT INTO FORNISCE VALUES(2016,'002','08',5)
INSERT INTO FORNISCE VALUES(2017,'003','08',3)
INSERT INTO FORNISCE VALUES(2017,'004','08',9)
GO


INSERT INTO CITTA VALUES('MO', 'Modena')
INSERT INTO CITTA VALUES('BO', 'Bologna')
INSERT INTO CITTA VALUES('MI', 'Milano')
INSERT INTO CITTA VALUES('RO', 'Roma')
INSERT INTO CITTA VALUES('TR', 'Terni')
INSERT INTO CITTA VALUES('CS','Cosenza')
GO